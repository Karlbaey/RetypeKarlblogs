---
title: ç¨‹åºè®¾è®¡#3%1 - é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡
published: 2025-09-06T17:33:08.502Z
description: ''
updated: ''
tags:
  - Golang
  - ç¨‹åºè®¾è®¡
draft: false
pin: 0
toc: true
lang: ''
abbrlink: 'program-design-object-oriented-programming-episode-three-p-one'
---

æœ¬ç¯‡æ•™ç¨‹ä¸æ˜¯å¿…é¡»çš„ï¼Œæˆ‘ä»¬å†™çš„ç®—æ³•é¢˜ä¸€èˆ¬ç”¨ä¸ä¸Šé¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ï¼ˆé™¤äº†å°‘æ•°å®ç°æ•°æ®ç»“æ„çš„é¢˜ç›®ï¼‰ã€‚ä½†æ˜¯å› ä¸ºéå¸¸é‡è¦ï¼Œå®ƒä½œä¸ºç¨‹åºè®¾è®¡çš„ä¸€æ¡æ”¯çº¿å‘å¸ƒã€‚é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æ˜¯[ç¨‹åºè®¾è®¡#3 - ç»“æ„ä½“å’Œæ•°æ®ç»“æ„å…¥é—¨](https://karlbaey.top/articles/program-design-struct-and-data-structures-for-newbie-episode-three/)çš„æ”¯çº¿ã€‚

æ‘˜è¦ï¼š**é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡**æ˜¯åŸºäº**å¯¹è±¡**çš„ç¼–ç¨‹ã€‚å¯¹è±¡æ˜¯å¯¹ç°å®ä¸–ç•Œäº‹ç‰©çš„**æŠ½è±¡è¡¨ç¤º**ï¼Œå¹¶å°†å…·æœ‰ç›¸åŒç‰¹å¾å’Œè¡Œä¸ºçš„äº‹ç‰©å½’ç±»ä¸º**ç±»**ã€‚Go è¯­è¨€é€šè¿‡**ç»“æ„ä½“**ã€**æ–¹æ³•**å’Œ**æ¥å£**æ¥å®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç‰¹æ€§ã€‚

æœ¬æ–‡é€šè¿‡æ±½è½¦çš„ä¾‹å­æ¥å‡å°ç†è§£æ¦‚å¿µçš„å›°éš¾ã€‚ä¸ºäº†é¿å…æ‰“æ–­ç†è§£ï¼Œå®Œæ•´çš„ä»£ç ç¤ºä¾‹è¢«ç§»åŠ¨åˆ°äº†é¢å¤–éƒ¨åˆ†ã€‚

## ä»è¿‡ç¨‹åˆ°å¯¹è±¡

æˆ‘ä»¬åœ¨ [#2](https://karlbaey.top/articles/program-design-sequence-for-newbies-and-buffering-io-episode-two/) ä»¥åŠ #2 ä¹‹å‰çš„æ•™ç¨‹ä¸­è®¾è®¡çš„ç¨‹åºéƒ½æœ‰ä¸€ä¸ª**æ˜ç¡®çš„è¿‡ç¨‹**ã€‚æ¯”å¦‚ï¼Œé¢˜ç›®ä¸­ç»™äº†ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬åº”è¯¥å¯¹è¿™ä¸ªæ•°ç»„åšäº›æ“ä½œæ‰èƒ½ç¬¦åˆæ ·ä¾‹çš„è¦æ±‚ã€‚è¿™äº›æ“ä½œé€šè¿‡**å˜é‡èµ‹å€¼**å’Œ**æµç¨‹æ§åˆ¶**å®ç°ã€‚å› ä¸ºæˆ‘ä»¬å¸Œæœ›**å®ç°å…·ä½“çš„ç›®æ ‡**ï¼Œæ‰€ä»¥å°±ä¸€å®šè¦ä¾èµ–ä¸€ç³»åˆ—æ­¥éª¤ã€‚åƒè¿™æ ·å¼ºè°ƒè¿‡ç¨‹çš„ç¨‹åºè®¾è®¡ï¼Œæˆ‘ä»¬å«åšé¢å‘è¿‡ç¨‹ç¨‹åºè®¾è®¡ï¼ˆPOPï¼Œprocedure oriented programmingï¼‰ã€‚é¢å‘è¿‡ç¨‹çš„ç¨‹åºåªè¦ç¨‹åºç»“æŸäº†ï¼Œäº‹æƒ…å°±å®Œæˆäº†ã€‚

é¢å‘è¿‡ç¨‹çš„ç¨‹åºä¼˜ç‚¹åœ¨äºï¼Œè¿™æ ·å†™çš„ç¨‹åºé€šå¸¸**ç›´è§‚é«˜æ•ˆ**ã€‚ä¾‹å¦‚æˆ‘ä»¬å‘ç°å“ªä¸€æ­¥å‡ºé—®é¢˜äº†ï¼Œåªéœ€è¦åœ¨å‡ºé”™çš„åœ°æ–¹ä¿®æ”¹å°±è¡Œã€‚

ä½†ä»£ç é‡å †å èµ·æ¥ï¼Œå †åˆ°äº†å‡ åä¸‡è¡Œï¼Œé‚£é¢å‘è¿‡ç¨‹ç¨‹åºæ˜¯å¾ˆéº»çƒ¦çš„ï¼Œå› ä¸ºå‡ºä¸€ç‚¹é—®é¢˜å°±å¯èƒ½å¯¼è‡´å®Œæ•´çš„é¡¹ç›®è¦å¤§ä¿®ã€‚æˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ä¸ªåŠæ³•ï¼ŒæŠŠç¨‹åºçš„æ¯ä¸ªæ“ä½œæ”¹æˆæŸä¸ª**å¯¹è±¡**ï¼ˆobjectï¼Œå®ƒæ˜¯æœ¬æ¡æ”¯çº¿çš„ä¸»è§’ï¼‰çš„åŠ¨ä½œã€‚è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨æ“ä½œç¨‹åºæ—¶å°±åªéœ€è¦è®©å¯¹è±¡åšå‡ºæŒ‡å®šçš„åŠ¨ä½œå°±è¡Œäº†ã€‚

æˆ‘ä»¬ä»¥é€ æ±½è½¦å’Œå¼€è½¦ä¸ºä¾‹ï¼Œå…ˆçœ‹çœ‹ç”¨é¢å‘è¿‡ç¨‹çš„æ€æƒ³[^1]è§£å†³è¿™ä¸ªé—®é¢˜ä¼šæ˜¯æ€æ ·ã€‚

1. é€ å¼•æ“
   1. åˆ¶é€ å¤–å£³
   2. å®‰è£…èºä¸ A B C D
   3. å®‰è£…æ´»å¡â€¦â€¦
2. é€ è½¦èº«
   1. ç„Šæ¥é’¢æ¿ W X Y Z
   2. å–·æ¶‚å–·æ¼†â€¦â€¦
3. å¼€è½¦
   1. æ‹§é’¥åŒ™ï¼ˆæ–¹å‘ç›˜å³ä¾§ï¼‰
   2. æ£€æŸ¥æ²¹å‹
      1. å¦‚æœæ²¹å‹è¶³å¤Ÿï¼Œé‚£ä¹ˆå¯åŠ¨è½¦è¾†æˆåŠŸã€‚å¦åˆ™å¤±è´¥ã€‚
   3. è¸©ç¦»åˆå™¨
   4. æŒ‚æŒ¡â€¦â€¦

è¿™æ ·çœ‹æ¥ï¼Œé¢å‘è¿‡ç¨‹çš„ç¨‹åºç¡®å®å¾ˆç›´è§‚ï¼Œå› ä¸ºå®ƒæŠŠæ‰€æœ‰å¯èƒ½çš„æ­¥éª¤éƒ½å†™è¿›å»äº†ã€‚

ä½†æœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœä¸æƒ³å¼€æ‰‹åŠ¨æŒ¡æ±½è½¦ï¼Œæ¢æˆäº†è‡ªåŠ¨æ¡£æ±½è½¦ï¼Œé‚£è¿™ä¸ªè¿‡ç¨‹å°±éœ€è¦å‡ ä¹å®Œå…¨é‡å†™ã€‚å› ä¸ºè¸©ç¦»åˆå™¨ï¼ŒæŒ‚æ¡£çš„é€»è¾‘å®Œå…¨å˜äº†ã€‚æˆ‘ä»¬æŠŠè¿™ç§**å„ç»„ä»¶ä¹‹é—´ä¾èµ–æ€§ç‰¹åˆ«å¼º**çš„ç‰¹ç‚¹å«åš**é«˜åº¦è€¦åˆ**ã€‚

å¦‚æœæˆ‘ä»¬å‘ç°å¼•æ“æœ‰ä¸€æšèºä¸éœ€è¦æ¢å‹å·ï¼Œé‚£æˆ‘ä»¬å°±è¦ä»æ‰€æœ‰çš„æ±½è½¦ä¸­æ‰¾åˆ°è¿™æšèºä¸ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­éå¸¸å®¹æ˜“å‡ºç°ç¼ºæ¼å’Œå‡ºé”™ã€‚å¦‚æœè¦åŠ ä¸Šæ–°çš„æ´»å¡ï¼Œä¹Ÿæœ‰è¿™ç§éšæ‚£ã€‚è¿™å°±æ˜¯é¢å‘è¿‡ç¨‹çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼Œ**éš¾ä»¥ç»´æŠ¤å’Œæ‰©å±•**ã€‚

è€Œä¸”æ›´å…³é”®çš„æ˜¯ï¼Œç¨‹åºå‘˜å¿…é¡»ç™¾åˆ†ç™¾äº†è§£æ±½è½¦ä»ç”Ÿäº§åˆ°å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä»¥åŠæ‰€æœ‰çš„æ•°æ®ï¼Œå› ä¸ºè¿™éƒ¨è½¦çš„æ‰€æœ‰å†…å®¹éƒ½æš´éœ²åœ¨å¤–ï¼Œä¸‡ä¸€è¢«ç ´åè€…ä¿®æ”¹äº†æ•°æ®ï¼Œå°±ä¼šå¯¼è‡´ä¸å¯é€†çš„é”™è¯¯ï¼Œç¨‹åºå‘˜å¿…é¡»åŠæ—¶æ”¹æ­£ã€‚è¿™ç§é£é™©å¤§å¤§åŠ é‡äº†ç¨‹åºå‘˜çš„è´Ÿæ‹…ã€‚

æ¥ä¸‹æ¥æ¢ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬ç”¨**é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡**ï¼ˆOOPï¼Œobject oriented programmingï¼‰çš„æ€æƒ³æ¥è¯•ç€è§£å†³ä¸Šé¢çš„é—®é¢˜ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹è±¡æ˜¯å…·ä½“çš„ä¸ªä½“ï¼Œä¹Ÿå°±æ˜¯ä¸Šæ–‡ä¸­å…·ä½“çš„è½¦ã€‚è½¦çš„è“å›¾å«åš**ç±»**ï¼ˆclassï¼‰ã€‚[^2]

ç›¸åº”åœ°ï¼ŒæŠŠç±»å˜æˆå…·ä½“çš„å¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åš**å®ä¾‹åŒ–**ã€‚

1. åˆ›å»ºç±»ï¼ˆç”»è“å›¾ï¼‰
   - `type Engine struct {isMotivated bool ...}` æ¥ç€å†™å¯åŠ¨çš„æ–¹æ³• `func (e Engine) Start() {}`ï¼ˆå¼•æ“ï¼‰
   - `type Transmission struct {speedRatio float64}`ï¼ˆå˜é€Ÿç®±ï¼‰
   - `type Doors [4]bool` ï¼ˆæ±½è½¦é—¨ï¼‰
   - `type Car {Engine Engine; Transmission Trasmission;}`ï¼ˆæ±½è½¦è“å›¾ï¼Œç»“åˆäº†å¼•æ“ã€å˜é€Ÿç®±ç­‰ï¼‰
2. åä½œå’Œå°è£…
   - æˆ‘ä»¬å®šä¹‰äº†å¼•æ“çš„è“å›¾ä¹‹åï¼Œåªéœ€è¦å‘Šè¯‰å¼•æ“ `Engine.Start()` å°±èƒ½å¤Ÿè®©å¼•æ“è‡ªå·±å‘åŠ¨ï¼Œè€Œä¸ç”¨æˆ‘ä»¬çŸ¥é“å¯åŠ¨åŸç†ã€‚å› ä¸ºå¯åŠ¨çš„æ–¹å¼å·²ç»åœ¨å¼•æ“çš„ç»“æ„ä½“ä¸­å†™å¥½äº†ï¼Œé‡‡ç”¨å“ªä¸€ç§å¯åŠ¨æ–¹å¼ï¼ˆç‡ƒæ²¹å–·å°„æˆ–è€…ç”µæœºå¯åŠ¨ï¼‰æ˜¯å¼•æ“è‡ªå·±çš„äº‹æƒ…ã€‚æˆ‘ä»¬å‘ç°ï¼Œè¿™ç§æ“ä½œå°†å…·ä½“çš„æ“ä½œç»†èŠ‚éšè—èµ·æ¥ï¼Œè€Œåªéœ€è¦æ‰§è¡Œå¯¹è±¡é¢„å…ˆè®¾ç½®å¥½çš„æ¥å£ï¼Œè¿™ç§æ–¹å¼å«åš**å°è£…**ï¼ˆencapsulationï¼‰ã€‚
   - æ±½è½¦å¯¹è±¡â€œæœ‰â€ä¸€ä¸ªå˜é€Ÿç®±ã€‚å½“æˆ‘ä»¬å¸Œæœ›é©¾é©¶æ±½è½¦æ—¶ï¼Œæ±½è½¦å¯¹è±¡å†…éƒ¨ä¼šè‡ªåŠ¨åè°ƒå˜é€Ÿç®±ç­‰å…ƒä»¶ï¼Œè®©å®ƒèƒ½å¤Ÿé€‚åº”å®é™…é©¾é©¶çš„éœ€è¦ã€‚æ¯”å¦‚ï¼Œè‡ªåŠ¨æ¡£æ±½è½¦å’Œæ‰‹åŠ¨æŒ¡æ±½è½¦çš„å˜é€Ÿç®±è¿è¡Œé€»è¾‘ä¸åŒï¼Œä½†è¿™éƒ½èƒ½å¤Ÿäº¤ç»™æ±½è½¦è‡ªå·±åè°ƒï¼Œæˆ‘ä»¬é©¾é©¶æ±½è½¦çš„æŒ‡ä»¤ä¸éœ€è¦æ”¹å˜ã€‚ä¸åŒçš„æ±½è½¦è¿è¡Œé€»è¾‘ä¸ä¸€è‡´ï¼Œä½†å®é™…é©¾é©¶æ—¶éƒ½ç”¨åˆ°äº† `Car.Drive()` è¿™æ ·çš„æŒ‡ä»¤ã€‚åŒæ ·çš„æŒ‡ä»¤å´èƒ½é€‚åº”ä¸åŒçš„åœºæ™¯ï¼Œè¿™å°±æ˜¯é¢å‘å¯¹è±¡çš„**å¤šæ€**ï¼ˆpolymorphismï¼‰ã€‚
3. ç»§æ‰¿å’Œæ‰©å±•
   - æˆ‘ä»¬ä¸Šé¢å†™çš„æ˜¯ç‡ƒæ²¹è½¦çš„è“å›¾ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦ç”µåŠ¨è½¦çš„è“å›¾ã€‚å› ä¸ºå®ƒä»¬éƒ½æ˜¯è½¦ï¼Œå°±æ²¡æœ‰å¿…è¦é‡å†™äº†ã€‚æˆ‘ä»¬åªè¦å°†ç‡ƒæ²¹è½¦çš„è“å›¾å¤åˆ¶ä¸€ä»½ç»™ç”µåŠ¨è½¦ï¼Œç„¶åå†åšä¿®æ”¹å°±è¡Œã€‚å¤åˆ¶è¿‡ç¨‹å°±æ˜¯é¢å‘å¯¹è±¡çš„**ç»§æ‰¿**ï¼ˆinheritanceï¼‰ã€‚[^3]
   - åœ¨å¤åˆ¶å¥½è“å›¾åï¼ˆç»§æ‰¿åï¼‰ï¼Œæˆ‘ä»¬åªè¦ç»™ç”µåŠ¨è½¦è“å›¾åŠ ä¸Šç”µæ± *ç±»*å’Œé€šç”µè‡ªæ£€*æ–¹æ³•*å³å¯ã€‚
   - ä¾ç…§ä¸Šé¢è¯´çš„ï¼Œç”µåŠ¨è½¦ç»§æ‰¿è‡ªè½¦ï¼Œè¿™å«åšé‡ç”¨ï¼ˆreuseï¼‰ã€‚
   - **è¿™ä¸€è¿‡ç¨‹ä¸éœ€è¦æˆ‘ä»¬è§¦ç¢°åŸæ¥çš„è“å›¾**ï¼Œè¿™æ˜¯å¾ˆå®‰å…¨çš„ã€‚

é¢å‘å¯¹è±¡è§£å†³äº†ä¸Šé¢çš„å‡ ä¸ªç—›ç‚¹ã€‚

**å°è£…éšè—äº†å¤æ‚æ€§ï¼Œè€Œåªç”¨æ“ä½œç®€å•çš„æ¥å£**ã€‚è¿™ä¸é¢å‘è¿‡ç¨‹ç›¸æ¯”å…·æœ‰å¾ˆå¤§çš„ä¼˜è¶Šæ€§ï¼Œæˆ‘ä»¬åªè¦ä¼šè¸©æ²¹é—¨ï¼Œä¼šè½¬æ–¹å‘ç›˜å°±è¡Œï¼Œè½¦é‡Œçš„é›¶ä»¶æ€ä¹ˆè¿è½¬æˆ‘ä»¬ä¸ç”¨ç®¡ã€‚è¿™æå¤§åœ°æ‹‰ä½äº†ä½¿ç”¨å’Œç†è§£çš„é—¨æ§›ã€‚

**ç»§æ‰¿å®ç°äº†ä»£ç çš„é«˜æ•ˆç‡å¤ç”¨å’Œæ‰©å±•**ã€‚å·²ç»å†™å¥½çš„å¯¹è±¡å¯ä»¥ç›´æ¥å¤ç”¨é€šç”¨çš„ä»£ç ï¼Œæˆ‘ä»¬å°±èƒ½ä¸“æ³¨åœ¨å†™æœ‰å·®åˆ«çš„éƒ¨åˆ†ã€‚å¤åˆ¶æ¨¡æ¿æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚

**å¤šæ€æé«˜äº†ä»£ç çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§**ã€‚å³ä½¿ç‡ƒæ²¹è½¦å’Œç”µåŠ¨è½¦çš„å¯åŠ¨é€»è¾‘ä¸åŒï¼Œå®ƒä»¬ä¹Ÿèƒ½æ ¹æ®è‡ªå·±çš„ç‰¹ç‚¹åšå‡ºä¸åŒååº”ã€‚æ—¥åå¢åŠ æ–°çš„è½¦å‹æ—¶ï¼Œæˆ‘ä»¬**å‡ ä¹ä¸ç”¨ä¿®æ”¹é©¾é©¶*æ–¹æ³•*çš„ä»£ç **ã€‚

**å°è£…ã€ç»§æ‰¿å’Œå¤šæ€æ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡çš„ä¸‰è¦ç´ **ã€‚

é¢å‘å¯¹è±¡æ˜¯å¾ˆæœ‰åˆ©äºå›¢é˜Ÿåä½œçš„ã€‚å›¢é˜Ÿä¸­çš„æ¯ä¸ªäººè´Ÿè´£ä¸€ä¸ªå…·ä½“çš„ç±»ï¼Œè¿™æ ·èƒ½å‡å°‘å†²çªï¼Œè€Œåªè¦åœ¨æœ€åæŠŠæ‰€æœ‰çš„ç±»æ­èµ·æ¥å°±å¥½ã€‚

åœ¨è¿™ä¸€éƒ¨åˆ†çš„æœ€åï¼Œæˆ‘ä»¬éœ€è¦ç»™é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡ä¸‹ä¸€ä¸ªå…¬å¹³çš„ç»“è®ºã€‚

- é¢å‘è¿‡ç¨‹æœ€é€‚åˆå®Œæˆå°è€Œç®€å•çš„ä»»åŠ¡ã€‚å› ä¸ºå®ƒçš„è„‰ç»œæ˜¯å¾ˆæ˜ç¡®çš„ã€‚
- é¢å‘å¯¹è±¡é€‚åˆå®Œæˆå¤§çš„ä»»åŠ¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¹‹åæˆ‘ä»¬æ‰‹å†™å¤§å‹æ•°æ®ç»“æ„ï¼ˆæ¯”å¦‚çº¢é»‘æ ‘ï¼‰æ—¶ï¼Œé¢å‘å¯¹è±¡çš„æ¨¡å—åŒ–å°±å¾ˆé€‚åˆä½¿ç”¨ã€‚

å¤§éƒ¨åˆ†çš„ç°ä»£è¯­è¨€éƒ½æ˜¯é¢å‘å¯¹è±¡çš„ï¼Œä¾‹å¦‚ Goã€C++ ä»¥åŠ Pythonï¼ˆPython ä¸­ä¸‡ç‰©çš†å¯¹è±¡ï¼Œä»»ä½•å¯èƒ½çš„æ“ä½œéƒ½æ˜¯æ¶‰åŠå¯¹è±¡çš„ï¼‰ã€‚åƒ Cã€BASIC å’Œ Pascalï¼Œè¿™äº›è¯­è¨€æ˜¯ä¸ºé¢å‘è¿‡ç¨‹è®¾è®¡çš„ã€‚

å…¶å®åœ¨è¿™ä¹‹å‰æˆ‘ä»¬å·²ç»è§è¯†è¿‡äº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„å¥½å¤„ï¼Œé‚£å°±æ˜¯ [#3 ä¸­çš„æ ˆ](https://karlbaey.top/articles/program-design-struct-and-data-structures-for-newbie-episode-three/#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84---%E6%A0%88)ã€‚

> ğŸ’¡**æ ˆï¼ˆStackï¼‰æ˜¯ä¸€ç§åè¿›å…ˆå‡ºï¼ˆLIFOï¼ŒLast In First Outï¼‰çš„æ•°æ®ç»“æ„ã€‚**
>
> è·ç¦»æ ˆçš„å…¥å£æœ€è¿‘çš„å…ƒç´ ï¼Œæˆ‘ä»¬å«åš**æ ˆé¡¶å…ƒç´ **ã€‚ç›¸åº”çš„ï¼Œè·ç¦»æ ˆçš„å…¥å£æœ€è¿œçš„å…ƒç´ å«åšæ ˆåº•å…ƒç´ ã€‚

æˆ‘ä»¬æŠŠæ ˆæŠ½è±¡æˆäº†ä¸€ä¸ªç±»ï¼Œè¦ç”¨æ—¶å°±å°†å®ƒå®ä¾‹åŒ–ã€‚

ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸¤æŠŠé”‹åˆ©çš„å‰‘ã€‚ä¸€æŠŠå«åšé¢å‘è¿‡ç¨‹ï¼Œå®ƒå¾ˆè½»ï¼Œä½†æ˜¯é‡è§å¤§çš„æ€ªç‰©å°±æŸæ‰‹æ— ç­–ï¼›å¦å¤–ä¸€æŠŠå«åšé¢å‘å¯¹è±¡ï¼Œå®ƒæ¯”ä¸Šä¸€æŠŠå‰‘é‡å¾—å¤šï¼Œä½†æ˜¯åœ¨å¤„ç†å¤§æ€ªç‰©æ—¶æ•ˆç‡å¥‡é«˜ã€‚åŒæ ·ï¼Œæˆ‘ä»¬åœ¨å®é™…çš„ç¨‹åºè®¾è®¡ä¸­ï¼Œå¾€å¾€éœ€è¦ç»“åˆèµ·å®ƒä»¬çš„ä¼˜ç‚¹æ‰èƒ½å†™å‡ºå…¼é¡¾ç¾è§‚å’Œæ€§èƒ½çš„ç¨‹åºã€‚

## é¢å¤–éƒ¨åˆ†

### ä¸€å°å®Œæ•´çš„è½¦

```go
package main

import (
    "fmt"
    "math/rand"
    "time"
)

// å¯åŠ¨å™¨ï¼Œç”¨æ¥å‘åŠ¨æ±½è½¦
type Starter interface {
    Start() bool
}

// å¯é©¾é©¶çš„æ¥å£
type Drivable interface {
    Accelerate(speed float64) bool
    Brake() bool
    GetSpeed() float64
}

// å¯åŠ æ²¹çš„æ¥å£
type Fuelable interface {
    Refuel(amount float64) bool
    GetFuel() float64
}

// ====æ±½è½¦åŸºæœ¬ç»„ä»¶====

type Engine struct {
    power     float64 // å…¨éƒ¨éƒ½æ˜¯ç§æœ‰å±æ€§ï¼ˆå°å†™å­—æ¯å¼€å¤´ï¼‰
    isRunning bool
    fuelType  string
}

func (e *Engine) Start() bool {
    if e.isRunning {
        fmt.Println("å¼•æ“å·²å¯åŠ¨")
        return false
    }

    fmt.Println("å¯åŠ¨ä¸­")
    time.Sleep(1 * time.Second)

    // æ‰“ç«å¤±è´¥
    if rand.Float32() < 0.1 {
        fmt.Println("å¼•æ“å¯åŠ¨å¤±è´¥äº†")
    }

    e.isRunning = true
    fmt.Println("å¼•æ“å¯åŠ¨æˆåŠŸ")
    return true
}

func (e *Engine) Stop() {
    if e.isRunning {
        e.isRunning = false
        fmt.Println("å¼•æ“å·²åœæ­¢")
    }
}

func (e *Engine) IsRunning() bool {
    return e.isRunning
}

// å†™ä¸€ä¸ªæ²¹ç®±
type FuelTank struct {
    capacity  float64
    fuelLevel float64
}

// å®ç°æ²¹ç®±æ¥å£
func (f *FuelTank) Refuel(amount float64) bool {
    if amount <= 0 {
        fmt.Println("æ— æ•ˆæ²¹é‡")
        return false
    }

    newLevel := f.fuelLevel + amount
    if newLevel > f.capacity {
        fmt.Printf("æ²¹ç®±æº¢å‡ºï¼Œå½“å‰å®¹é‡ä¸º %.1f L\n", f.capacity)
        f.fuelLevel = f.capacity
    } else {
        f.fuelLevel = newLevel
    }

    fmt.Printf("åŠ å…¥äº† %.1f L çš„ç‡ƒæ²¹ã€‚å½“å‰æ²¹é‡ï¼š%.1fL\n", amount, f.fuelLevel)
    return true
}

func (f *FuelTank) Consume(amount float64) bool {
    if amount <= 0 {
        return false
    }

    if f.fuelLevel < amount {
        fmt.Println("ç‡ƒæ²¹ä¸è¶³ï¼")
        return false
    }

    f.fuelLevel -= amount
    return true
}

func (f *FuelTank) GetFuel() float64 {
    return f.fuelLevel
}

// å˜é€Ÿç®±ç»“æ„ä½“
type Transmission struct {
    gearCount int // å…¨éƒ¨æ¡£ä½æ•°
    nowGear   int // å½“å‰çš„æ¡£ä½
}

func (t *Transmission) ShiftUp() bool {
    if t.nowGear < t.gearCount {
        t.nowGear++
        fmt.Printf("æ¡£ä½æé«˜è‡³ %d æ¡£\n", t.nowGear)
        return true
    }

    fmt.Println("å½“å‰å·²æ˜¯æœ€é«˜æ¡£ä½")
    return false
}

func (t *Transmission) ShiftDown() bool {
    if t.nowGear > 0 {
        t.nowGear--
        fmt.Printf("æ¡£ä½å‡è‡³ %d æ¡£\n", t.nowGear)
        return true
    }

    fmt.Println("å½“å‰æ±½è½¦æœªå¯åŠ¨")
    return false
}

// ä¸‹é¢æ˜¯å…·ä½“çš„ç»„ä»¶
// ä¹Ÿå°±æ˜¯ä½“ç°é¢å‘å¯¹è±¡çš„å¤šæ€

type GasolineEngine struct {
    Engine       // ç»„åˆæˆ‘ä»¬å†™å¥½çš„å¼•æ“ç»“æ„ä½“
    cylinder int // æ±½ç¼¸æ•°
}

// é‡å†™ start æ–¹æ³•ï¼Œå› ä¸ºå¤šäº†ä¸€ä¸ªå¼•æ“é¢„çƒ­çš„æ“ä½œ
func (g *GasolineEngine) Start() bool {
    fmt.Println("é¢„çƒ­å¼•æ“ä¸­â€¦â€¦")
    time.Sleep(500 * time.Millisecond) // é¢„çƒ­äº”ç™¾æ¯«ç§’ï¼ˆåŠç§’ï¼‰
    return g.Engine.Start()
}

// ç”µåŠ¨é©¬è¾¾
type ElectricMotor struct {
    Engine
    batteryCapacity float64
}

// é‡å†™ start
func (e *ElectricMotor) Start() bool {
    fmt.Println("å¯åŠ¨ç”µåŠ¨é©¬è¾¾â€¦â€¦")
    time.Sleep(200 * time.Millisecond) // ç”µåŠ¨é©¬è¾¾æ¯”æ±½æ²¹æœºå¯åŠ¨æ›´å¿«

    e.isRunning = true
    if rand.Float32() < 0.02 {
        fmt.Println("ç”µæ± ç”µå‹ä¸è¶³ï¼Œå¯åŠ¨å¤±è´¥")
        return false
    }

    e.isRunning = true
    fmt.Println("ç”µåŠ¨é©¬è¾¾å¯åŠ¨æˆåŠŸ")
    return true
}

// è‡ªåŠ¨å˜é€Ÿç®±
type AutomaticTransmission struct {
    Transmission
}

func (a *AutomaticTransmission) ShiftUp() bool {
    fmt.Println("è‡ªåŠ¨æ¢æ¡£ä¸­")
    time.Sleep(300 * time.Millisecond)
    return a.Transmission.ShiftUp()
}

// æ‰‹åŠ¨å˜é€Ÿç®±
type ManualTransmission struct {
    Transmission
}

func (m *ManualTransmission) ShiftUp() bool {
    fmt.Println("æ‰‹åŠ¨åŠ é€Ÿä¸­â€¦â€¦ç¦»åˆå™¨æ­£åœ¨å‘åŠ›")
    time.Sleep(500 * time.Millisecond)
    return m.Transmission.ShiftUp()
}

// æ±½è½¦ä¸»ä½“
type Car struct {
    model        string
    speed        float64
    engine       Starter // è°ƒç”¨äº†æ¥å£ä½œä¸ºç±»å‹ï¼Œä»¥å®ç°å¤šæ€
    fuelTank     Fuelable
    transmission interface {
        ShiftUp() bool
        ShiftDown() bool
    }
    bodyStyle string
}

// å®ç° Drivable æ¥å£
func (c *Car) Accelerate(speed float64) bool {
    if !c.engine.Start() {
        fmt.Println("å¼•æ“æœªå‘åŠ¨ï¼Œæ— æ³•åŠ é€Ÿ")
        return false
    }

    // æ£€æŸ¥æ²¹/ç”µé‡
    if fuelable, ok := c.engine.(interface{ GetFuelLevel() float64 }); ok { // ç±»å‹æ–­è¨€
        if fuelable.GetFuelLevel() <= 0 {
            fmt.Println("æ— æ³•åŠ é€Ÿï¼Œç‡ƒæ–™å·²è€—å°½")
            return false
        }
    }

    c.speed += speed
    fmt.Printf("åŠ é€Ÿè‡³ %.1f km/h \n", c.speed)

    // è‡ªåŠ¨æ¢æ¡£ï¼ˆç®€åŒ–é€»è¾‘ï¼‰
    if c.transmission != nil && speed > 0 {
        if c.speed > 30 {
            c.transmission.ShiftUp()
        }
    }

    return true
}

func (c *Car) Brake() bool {
    if c.speed <= 0 {
        fmt.Println("æ±½è½¦å·²åœä¸‹")
        return false
    }

    c.speed -= 10
    if c.speed < 0 {
        c.speed = 0
    }

    fmt.Printf("å‡é€Ÿè‡³ %.1f km/h \n", c.speed)

    // æ ¹æ®é€Ÿåº¦è‡ªåŠ¨é™æ¡£
    if c.transmission != nil && c.speed < 20 {
        c.transmission.ShiftDown()
    }

    return true
}

func (c *Car) GetSpeed() float64 {
    return c.speed
}

func (c *Car) Refuel(amount float64) bool {
    return c.fuelTank.Refuel(amount)
}

func (c *Car) GetFuelLevel() float64 {
    return c.fuelTank.GetFuel()
}

// === æ„é€ å‡½æ•° ===

// åˆ›å»ºæ±½æ²¹è½¦
func NewGasolineCar(model, bodyStyle string) *Car {
    engine := &GasolineEngine{
        Engine: Engine{
            power:    150,
            fuelType: "gasoline",
        },
        cylinder: 4,
    }

    fuelTank := &FuelTank{
        capacity:  50.0,
        fuelLevel: 10.0,
    }

    transmission := &AutomaticTransmission{
        Transmission: Transmission{
            gearCount: 6,
        },
    }

    return &Car{
        model:        model,
        engine:       engine,
        fuelTank:     fuelTank,
        transmission: transmission,
        bodyStyle:    bodyStyle,
    }
}

// åˆ›å»ºç”µåŠ¨è½¦
func NewElectricCar(model, bodyStyle string) *Car {
    engine := &ElectricMotor{
        Engine: Engine{
            power:    200,
            fuelType: "electricity",
        },
        batteryCapacity: 75.0,
    }

    // ç”µåŠ¨è½¦çš„"æ²¹ç®±"å®é™…ä¸Šæ˜¯ç”µæ± 
    fuelTank := &FuelTank{
        capacity:  75.0,
        fuelLevel: 50.0,
    }

    // ç”µåŠ¨è½¦é€šå¸¸ä½¿ç”¨å•é€Ÿå˜é€Ÿç®±
    transmission := &AutomaticTransmission{
        Transmission: Transmission{
            gearCount: 1,
        },
    }

    return &Car{
        model:        model,
        engine:       engine,
        fuelTank:     fuelTank,
        transmission: transmission,
        bodyStyle:    bodyStyle,
    }
}

// ========== ä¸»å‡½æ•° ==========

func main() {
    rand.Seed(time.Now().UnixNano())

    fmt.Println("=== æ±½æ²¹è½¦æ¼”ç¤º ===")
    gasCar := NewGasolineCar("Toyota Camry", "Sedan")
    fmt.Printf("åˆå§‹æ²¹é‡: %.1f L\n", gasCar.GetFuelLevel())
    gasCar.Refuel(20.0)
    gasCar.Accelerate(50.0)
    gasCar.Accelerate(30.0)
    gasCar.Brake()
    gasCar.Brake()
    fmt.Println()

    fmt.Println("=== ç”µåŠ¨è½¦æ¼”ç¤º ===")
    electricCar := NewElectricCar("Tesla Model 3", "Sedan")
    fmt.Printf("åˆå§‹ç”µé‡: %.1f %%\n", electricCar.GetFuelLevel()/0.75) // è½¬æ¢ä¸ºç™¾åˆ†æ¯”
    electricCar.Accelerate(60.0)
    electricCar.Accelerate(40.0)
    electricCar.Brake()

    // æ¼”ç¤ºå¤šæ€ - ç»Ÿä¸€å¤„ç†ä¸åŒç±»å‹çš„æ±½è½¦
    fmt.Println("\n=== å¤šæ€æ¼”ç¤º ===")
    cars := []Drivable{gasCar, electricCar}
    for i, car := range cars {
        fmt.Printf("æ±½è½¦ %d å½“å‰é€Ÿåº¦: %.1f km/h\n", i+1, car.GetSpeed())
    }
}

```

è¾“å‡º

```text
=== æ±½æ²¹è½¦æ¼”ç¤º ===
åˆå§‹æ²¹é‡: 10.0L
åŠ å…¥äº† 20.0 L çš„ç‡ƒæ²¹ã€‚å½“å‰æ²¹é‡ï¼š30.0L
é¢„çƒ­å¼•æ“ä¸­â€¦â€¦
å¯åŠ¨ä¸­
å¼•æ“å¯åŠ¨æˆåŠŸ
åŠ é€Ÿè‡³ 50.0 km/h
è‡ªåŠ¨æ¢æ¡£ä¸­
æ¡£ä½æé«˜è‡³ 1 æ¡£
é¢„çƒ­å¼•æ“ä¸­â€¦â€¦
å¼•æ“å·²å¯åŠ¨
å¼•æ“æœªå‘åŠ¨ï¼Œæ— æ³•åŠ é€Ÿ
å‡é€Ÿè‡³ 40.0 km/h
å‡é€Ÿè‡³ 30.0 km/h

=== ç”µåŠ¨è½¦æ¼”ç¤º ===
åˆå§‹ç”µé‡: 66.7%
å¯åŠ¨ç”µåŠ¨é©¬è¾¾â€¦â€¦
ç”µåŠ¨é©¬è¾¾å¯åŠ¨æˆåŠŸ
åŠ é€Ÿè‡³ 60.0 km/h
è‡ªåŠ¨æ¢æ¡£ä¸­
æ¡£ä½æé«˜è‡³ 1 æ¡£
å¯åŠ¨ç”µåŠ¨é©¬è¾¾â€¦â€¦
ç”µåŠ¨é©¬è¾¾å¯åŠ¨æˆåŠŸ
åŠ é€Ÿè‡³ 100.0 km/h
è‡ªåŠ¨æ¢æ¡£ä¸­
å½“å‰å·²æ˜¯æœ€é«˜æ¡£ä½
å‡é€Ÿè‡³ 90.0 km/h

=== å¤šæ€æ¼”ç¤º ===
æ±½è½¦ 1 å½“å‰é€Ÿåº¦: 30.0 km/h
æ±½è½¦ 2 å½“å‰é€Ÿåº¦: 90.0 km/h
```

è¿™ä¸€æ®µä»£ç å°±å¾ˆå¥½åœ°å±•ç¤ºäº†é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡çš„æ ¸å¿ƒæ€æƒ³ã€‚

**å°è£…**ï¼šåœ¨ä¸Šé¢çš„ç»“æ„ä½“ä¸­ï¼Œæ‰€æœ‰çš„ç»“æ„ä½“å­—æ®µéƒ½æ˜¯ç§æœ‰ï¼ˆprivateï¼‰çš„ï¼ˆé€šè¿‡å­—æ®µé¦–å­—æ¯å°å†™å®ç°ï¼‰ã€‚

è®¿é—®æ¥å£åˆ™é€šè¿‡å…¬å…±æ–¹æ³•æä¾›ã€‚ä¾‹å¦‚ `Engine` çš„ `isRunning` å­—æ®µåªèƒ½é€šè¿‡ `IsRunning()` æ–¹æ³•è®¿é—®ã€‚

**å¤šæ€**ï¼šé€šè¿‡æ¥å£å®ç°å¤šæ€è¡Œä¸ºã€‚`Starter`ã€`Drivable` å’Œ `Fuelable` æ¥å£å®šä¹‰äº†é€šç”¨è¡Œä¸ºï¼Œè€Œå…·ä½“çš„æ–¹æ³•ï¼ˆ`GasolineEngine` å’Œ `ElectricMotor`ï¼‰æä¾›ç‰¹å®šå®ç°ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œæ±½è½¦å¯ä»¥ç»Ÿä¸€å¤„ç†ä¸åŒç±»å‹çš„å¼•æ“å’Œå˜é€Ÿç®±ã€‚

**ç»„åˆ/ç»§æ‰¿**ï¼šGo æ²¡æœ‰ä¼ ç»Ÿç»§æ‰¿ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ç»“æ„ä½“åµŒå…¥ï¼ˆembeddingï¼‰å®ç°ç»„åˆã€‚å¯ä»¥é‡å†™çˆ¶ç»“æ„ä½“çš„æ–¹æ³•ï¼ˆå¦‚ `Start()` æ–¹æ³•ï¼‰æ¥å®ç°ä»£ç å¤ç”¨å’Œæ‰©å±•ã€‚

------

é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœä½¿ç”¨ VS Code ç¼–è¾‘ä»£ç çš„è¯ï¼ŒæŠŠå…‰æ ‡æ‚¬æµ®åœ¨ç»“æ„ä½“ä¸Šå°±èƒ½çœ‹åˆ°æˆ‘ä»¬å†™å¥½çš„æ³¨é‡Šã€‚

![å˜é€Ÿç®±ç»“æ„ä½“çš„åŸºç¡€ä¿¡æ¯](https://gcore.jsdelivr.net/gh/karlbaey/tutu@master/pictures/image-20250907123559434.png)

å¦‚æœéœ€è¦æ˜¾ç¤º**å˜é€Ÿç®±ç»“æ„ä½“**é‚£ä¸€è¡Œè¯´æ˜ï¼Œåªè¦åœ¨ `type Transmission struct {}` ä¸Šé¢ç´§è´´ç€å†™æ³¨é‡Šå°±å¯ä»¥äº†ã€‚

![å˜é€Ÿç®±æ³¨é‡Šå†™æ³•](https://gcore.jsdelivr.net/gh/karlbaey/tutu@master/pictures/image-20250907123926153.png)

[^1]: å‡†ç¡®åœ°è¯´ï¼Œé¢å‘è¿‡ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹çš„**èŒƒå¼**ï¼ˆparadigmï¼‰ã€‚ä¹Ÿå°±æ˜¯ä¸€ç§å†™ä»£ç çš„å…¸å‹ã€‚ç”¨æ›´å‰å«çš„è¯­è¨€æ¥è¯´ï¼ŒèŒƒå¼å°±æ˜¯æ–¹æ³•è®ºã€‚
[^2]: Go è¯­è¨€æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªç±»å¾€å¾€é€šè¿‡**ç»“æ„ä½“**å®Œæˆã€‚
[^3]: Go æ²¡æœ‰ç±»ä¼¼ Python çš„ç»§æ‰¿ã€‚Go å®ç°ç»§æ‰¿æ˜¯é€šè¿‡å°†æ–°ç±»ç»„åˆæ—§ç±»æ¥å®ç°çš„ï¼Œè¯·çœ‹ä¸‹æ–¹é¢å¤–éƒ¨åˆ†ã€‚
